#install.packages("Synth") 
#install.packages("dplyr") 
#install.packages("foreign") 
#install.packages("augsynth") 
#install.packages(c("rlang", "devtools", "yaml"), repos = "https://cran.rstudio.com", dependencies = TRUE)

library(dplyr) #mutate, filter, summarize
library(foreign) #dta
# library(Synth) #synth
library(augsynth) #augsynth

#################################################################################
#################################################################################
############################# POBREZA ###########################################
#################################################################################
#################################################################################


###############################################################################1
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
provincia2_seleccionada <- 1 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_1.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_1.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################7
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
provincia2_seleccionada <- 7 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_7.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_7.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################10
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
provincia2_seleccionada <- 10 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_10.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_10.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################16
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 16 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_16.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_16.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################17
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 17 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_17.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_17.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################18
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 18 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_18.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_18.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################23
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 23 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_23.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_23.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################26
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 26 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_26.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_26.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################27
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 27 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_27.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_27.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################38
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 38 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_38.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_38.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################39
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 39 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_39.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_39.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################41
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 41 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_41.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_41.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################42
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 42 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_42.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_42.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################44
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 44 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_44.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_44.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################45
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 45 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_45.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_45.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################55
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 55 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_55.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_55.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################57
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 57 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_57.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_57.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################65
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 65 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_65.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_65.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################66
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 66 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_66.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_66.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################71
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 71 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_71.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_71.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################75
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 75 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_75.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_75.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################76
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 76 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_76.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_76.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################77
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 77 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_77.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_77.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################78
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 78 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_78.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_78.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################79
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 79 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_79.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_79.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################80
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 80 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_80.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_80.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################84
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 84 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_84.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_84.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################86
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 86 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_86.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_86.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################87
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 87 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_87.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_87.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################88
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 88 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_88.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_88.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################89
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 89 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_89.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_89.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################91
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 91 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_91.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_91.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################92
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 92 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_92.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_92.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################95
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 95 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_95.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_95.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################100
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 100 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_100.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_100.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################104
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 104 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_104.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_104.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################105
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 105 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_105.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_105.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################106
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 106 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_106.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_106.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################107
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 107 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_107.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_107.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################108
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 108 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_108.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_108.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################112
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 112 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_112.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_112.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################119
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 119 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_119.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_119.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################125
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 125 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_125.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_125.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################129
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 129 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_129.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_129.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################130
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 130 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_130.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_130.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################133
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 133 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_133.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_133.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################139
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 139 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_139.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_139.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################140
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 140 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_140.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_140.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################141
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 141 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_141.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_141.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################144
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 144 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_144.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_144.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################149
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 149 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_149.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_149.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################150
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 150 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_150.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_150.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################152
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 152 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_152.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_152.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################153
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 153 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_153.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_153.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################157
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 157 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_157.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_157.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################158
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 158 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_158.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_158.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################159
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 159 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_159.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_159.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################162
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 162 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_162.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_162.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################169
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 169 #provincia2 tratada
Base$pobrelag <- c(NA, Base$pobre[-nrow(Base)])
Base$pobrelag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(pobre_est_1 ~ treated | pobrelag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
pobre_obs <- data.frame("pobre_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
pobre_ascm <- data.frame("pobre_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, pobre_obs, pobre_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Base_pobre_169.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/pobreza/ASCM/Pesos_pobre_169.dta")
rm(pobre_obs, asyn, Base, pobre_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)



#################################################################################
#################################################################################
############################# INGRESO_PEAO#######################################
#################################################################################
#################################################################################

###############################################################################1
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
provincia2_seleccionada <- 1 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_1.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_1.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################7
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 7 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_7.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_7.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################10
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 10 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_10.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_10.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################16
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 16 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_16.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_16.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################17
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 17 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_17.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_17.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################18
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 18 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_18.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_18.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################23
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 23 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_23.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_23.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################26
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 26 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_26.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_26.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################27
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 27 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_27.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_27.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################38
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 38 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_38.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_38.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################39
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 39 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_39.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_39.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################41
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 41 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_41.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_41.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################42
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 42 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_42.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_42.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################44
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 44 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_44.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_44.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################45
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 45 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_45.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_45.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################55
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 55 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_55.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_55.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################57
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 57 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_57.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_57.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################65
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 65 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_65.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_65.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################66
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 66 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_66.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_66.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################71
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 71 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_71.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_71.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################75
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 75 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_75.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_75.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################76
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 76 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_76.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_76.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################77
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 77 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_77.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_77.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################78
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 78 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_78.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_78.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################79
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 79 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_79.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_79.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################80
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 80 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_80.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_80.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################84
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 84 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_84.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_84.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################86
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 86 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_86.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_86.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################87
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 87 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_87.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_87.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################88
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 88 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_88.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_88.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################89
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 89 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_89.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_89.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################91
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 91 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_91.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_91.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################92
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 92 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_92.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_92.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################95
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 95 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_95.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_95.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################100
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 100 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_100.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_100.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################104
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 104 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_104.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_104.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################105
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 105 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_105.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_105.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################106
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 106 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_106.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_106.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################107
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 107 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_107.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_107.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################108
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 108 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_108.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_108.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################112
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 112 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_112.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_112.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################119
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 119 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_119.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_119.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################125
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 125 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_125.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_125.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################129
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 129 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_129.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_129.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################130
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 130 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_130.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_130.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################133
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 133 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_133.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_133.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################139
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 139 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_139.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_139.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################140
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 140 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_140.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_140.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################141
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 141 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_141.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_141.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################144
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 144 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_144.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_144.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################149
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 149 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_149.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_149.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################150
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 150 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_150.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_150.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################152
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 152 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_152.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_152.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################153
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 153 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_153.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_153.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################157
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 157 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_157.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_157.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################158
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 158 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_158.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_158.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################159
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 159 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_159.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_159.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################162
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 162 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_162.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_162.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################169
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 169 #provincia2 tratada
Base$ingreso_peaolag <- c(NA, Base$ingreso_peao[-nrow(Base)])
Base$ingreso_peaolag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(ingreso_peao_est_1 ~ treated | ingreso_peaolag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
ingreso_peao_obs <- data.frame("ingreso_peao_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
ingreso_peao_ascm <- data.frame("ingreso_peao_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, ingreso_peao_obs, ingreso_peao_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Base_ingreso_peao_169.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/ingreso_PEAO/ASCM/Pesos_ingreso_peao_169.dta")
rm(ingreso_peao_obs, asyn, Base, ingreso_peao_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)



#################################################################################
#################################################################################
#################################### PEAO#######################################
#################################################################################
#################################################################################



Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
provincia2_seleccionada <- 1 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_1.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_1.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################7
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 7 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_7.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_7.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################10
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 10 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_10.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_10.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################16
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 16 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_16.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_16.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################17
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 17 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_17.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_17.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################18
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 18 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_18.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_18.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################23
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 23 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_23.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_23.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################26
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 26 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_26.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_26.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################27
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 27 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_27.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_27.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################38
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 38 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_38.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_38.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################39
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 39 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_39.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_39.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################41
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 41 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_41.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_41.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################42
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 42 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_42.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_42.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################44
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 44 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_44.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_44.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################45
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 45 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_45.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_45.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################55
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 55 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_55.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_55.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################57
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 57 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_57.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_57.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################65
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 65 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_65.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_65.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################66
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 66 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_66.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_66.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################71
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 71 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_71.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_71.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################75
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 75 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_75.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_75.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################76
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 76 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_76.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_76.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################77
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 77 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_77.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_77.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################78
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 78 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_78.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_78.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################79
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 79 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_79.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_79.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################80
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 80 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_80.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_80.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################84
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 84 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_84.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_84.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################86
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 86 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_86.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_86.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################87
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 87 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_87.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_87.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################88
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 88 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_88.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_88.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################89
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 89 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_89.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_89.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################91
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 91 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_91.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_91.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################92
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 92 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_92.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_92.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################95
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 95 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_95.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_95.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################100
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 100 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_100.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_100.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################104
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 104 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_104.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_104.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################105
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 105 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_105.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_105.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################106
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 106 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_106.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_106.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################107
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 107 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_107.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_107.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################108
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 108 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_108.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_108.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################112
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 112 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_112.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_112.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################119
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 119 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_119.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_119.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################125
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 125 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_125.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_125.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################129
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 129 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_129.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_129.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################130
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 130 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_130.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_130.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################133
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 133 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_133.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_133.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################139
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 139 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_139.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_139.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################140
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 140 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_140.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_140.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################141
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 141 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_141.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_141.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################144
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 144 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_144.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_144.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################149
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 149 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_149.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_149.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################150
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 150 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_150.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_150.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################152
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 152 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_152.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_152.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################153
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 153 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_153.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_153.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################157
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 157 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_157.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_157.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################158
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 158 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_158.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_158.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################159
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 159 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_159.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_159.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################162
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 162 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_162.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_162.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################169
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 169 #provincia2 tratada
Base$PEAOlag <- c(NA, Base$PEAO[-nrow(Base)])
Base$PEAOlag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_est_1 ~ treated | PEAOlag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_obs <- data.frame("PEAO_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_ascm <- data.frame("PEAO_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_obs, PEAO_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Base_PEAO_169.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO/ASCM/Pesos_PEAO_169.dta")
rm(PEAO_obs, asyn, Base, PEAO_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)



#################################################################################
#################################################################################
############################# PEAO_f ############################################
#################################################################################
#################################################################################

###############################################################################1
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
provincia2_seleccionada <- 1 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_1.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_1.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################7
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 7 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_7.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_7.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################10
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 10 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_10.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_10.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################16
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 16 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_16.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_16.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################17
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 17 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_17.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_17.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################18
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 18 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_18.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_18.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################23
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 23 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_23.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_23.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################26
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 26 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_26.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_26.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################27
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 27 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_27.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_27.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################38
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 38 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_38.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_38.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################39
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 39 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_39.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_39.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################41
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 41 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_41.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_41.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################42
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 42 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_42.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_42.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################44
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 44 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_44.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_44.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################45
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 45 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_45.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_45.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################55
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 55 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_55.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_55.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################57
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 57 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_57.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_57.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################65
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 65 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_65.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_65.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################66
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 66 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_66.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_66.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################71
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 71 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_71.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_71.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################75
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 75 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_75.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_75.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################76
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 76 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_76.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_76.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################77
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 77 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_77.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_77.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################78
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 78 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_78.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_78.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################79
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 79 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_79.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_79.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################80
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 80 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_80.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_80.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################84
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 84 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_84.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_84.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################86
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 86 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_86.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_86.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################87
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 87 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_87.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_87.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################88
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 88 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_88.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_88.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################89
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 89 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_89.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_89.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################91
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 91 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_91.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_91.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################92
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 92 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_92.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_92.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################95
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 95 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_95.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_95.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################100
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 100 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_100.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_100.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################104
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 104 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_104.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_104.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################105
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 105 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_105.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_105.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################106
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 106 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_106.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_106.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################107
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 107 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_107.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_107.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################108
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 108 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_108.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_108.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################112
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 112 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_112.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_112.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################119
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 119 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_119.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_119.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################125
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 125 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_125.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_125.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################129
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 129 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_129.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_129.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################130
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 130 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_130.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_130.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################133
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 133 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_133.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_133.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################139
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 139 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_139.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_139.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################140
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 140 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_140.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_140.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################141
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 141 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_141.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_141.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################144
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 144 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_144.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_144.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################149
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 149 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_149.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_149.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################150
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 150 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_150.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_150.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################152
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 152 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_152.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_152.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################153
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 153 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_153.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_153.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################157
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 157 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_157.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_157.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################158
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 158 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_158.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_158.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################159
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 159 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_159.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_159.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################162
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 162 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_162.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_162.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################169
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 169 #provincia2 tratada
Base$PEAO_flag <- c(NA, Base$PEAO_f[-nrow(Base)])
Base$PEAO_flag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_f_est_1 ~ treated | PEAO_flag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_f_obs <- data.frame("PEAO_f_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_f_ascm <- data.frame("PEAO_f_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_f_obs, PEAO_f_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Base_PEAO_f_169.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_f/ASCM/Pesos_PEAO_f_169.dta")
rm(PEAO_f_obs, asyn, Base, PEAO_f_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)





#################################################################################
#################################################################################
############################# PEAO_inf ##########################################
#################################################################################
#################################################################################

###############################################################################1
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
provincia2_seleccionada <- 1 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_1.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_1.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################7
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
provincia2_seleccionada <- 7 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_7.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_7.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################10
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 10 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_10.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_10.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################16
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 16 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_16.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_16.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################17
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 17 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_17.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_17.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################18
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 18 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_18.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_18.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################23
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 23 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_23.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_23.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################26
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 26 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_26.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_26.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################27
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 27 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_27.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_27.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################38
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 38 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_38.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_38.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################39
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 39 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_39.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_39.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################41
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 41 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_41.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_41.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################42
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 42 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_42.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_42.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################44
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 44 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_44.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_44.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################45
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 45 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_45.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_45.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################55
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 55 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_55.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_55.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################57
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 57 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_57.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_57.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################65
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 65 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_65.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_65.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################66
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 66 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_66.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_66.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################71
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 71 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_71.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_71.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################75
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 75 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_75.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_75.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################76
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 76 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_76.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_76.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################77
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 77 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_77.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_77.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################78
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 78 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_78.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_78.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################79
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 79 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_79.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_79.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################80
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 80 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_80.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_80.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################84
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 84 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_84.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_84.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################86
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 86 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_86.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_86.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################87
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 87 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_87.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_87.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################88
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 88 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_88.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_88.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################89
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 89 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_89.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_89.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################91
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 91 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_91.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_91.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################92
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 92 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_92.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_92.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################95
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 95 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_95.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_95.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################100
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 100 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_100.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_100.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################104
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 104 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_104.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_104.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################105
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 105 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_105.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_105.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################106
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 106 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_106.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_106.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################107
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 107 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_107.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_107.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################108
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 108 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_108.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_108.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################112
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 112 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_112.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_112.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################119
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 119 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_119.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_119.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################125
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 125 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_125.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_125.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################129
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 129 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_129.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_129.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################130
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 130 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_130.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_130.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################133
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 133 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_133.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_133.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################139
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 139 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_139.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_139.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################140
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 140 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_140.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_140.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################141
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 141 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_141.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_141.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################144
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 144 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_144.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_144.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################149
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 149 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_149.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_149.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################150
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 150 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_150.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_150.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################152
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 152 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_152.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_152.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################153
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 153 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_153.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_153.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################157
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 157 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_157.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_157.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################158
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 158 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_158.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_158.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################159
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 159 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_159.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_159.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################162
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 162 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_162.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_162.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)
###############################################################################169
Base <- read.dta("G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/intermedios/n_base_datos/BD_BaseFinalBalanceada_old.dta") 
  provincia2_seleccionada <- 169 #provincia2 tratada
Base$PEAO_inflag <- c(NA, Base$PEAO_inf[-nrow(Base)])
Base$PEAO_inflag[which(!duplicated(Base$provincia2))] <- NA
Base <- mutate(Base, "treated" = if_else(year == 2020 & trimestre > 1 & CORTEAL1=="TRATADO", 1, 0 , missing=NULL))
Base <- filter(Base, provincia2 == provincia2_seleccionada | CORTEAL1=="CONTROL")
asyn <- augsynth(PEAO_inf_est_1 ~ treated | PEAO_inflag  , provincia2, periodo, Base,  progfunc = "Ridge", scm=T)
PEAO_inf_obs <- data.frame("PEAO_inf_est_1" = asyn$data$synth_data$Y1plot)
Pesos <- data.frame(provincia2 = as.numeric(row.names(asyn$weights)), "Pesos_ascm" = asyn$weights)
periodo <- c(1:44)
PEAO_inf_ascm <- data.frame("PEAO_inf_ascm" = predict(asyn, att=F))
diferencia_ascm <- data.frame("dif_ascm" = predict(asyn, att=T))
base_ascm <-cbind(periodo, PEAO_inf_obs, PEAO_inf_ascm, diferencia_ascm)
write.dta(base_ascm,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Base_PEAO_inf_169.dta")
write.dta(Pesos,"G:/Mi unidad/1. PROYECTOS TELLO 2022/SCM SPILL OVERS/outputs/PEAO_inf/ASCM/Pesos_PEAO_inf_169.dta")
rm(PEAO_inf_obs, asyn, Base, PEAO_inf_ascm, diferencia_ascm, base_ascm, Pesos, periodo, provincia2_seleccionada)




